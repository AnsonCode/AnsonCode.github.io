<!DOCTYPE html>
<html lang="zh-cn">
    <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noodp"/>
    <meta name="author" content="Anson">
    <meta name="description" content="anson会写代码的产品经理，这是我的技术博客，专注产品设计及软件开发。">
    <meta name="keywords" content="golang;PMP">
    
    <link rel="prev" href="http://ansoncode.bazhentu.net/2021/101%E7%BC%96%E7%A0%81%E5%9B%BD%E9%99%85%E6%B1%82%E6%95%91%E4%BF%A1%E5%8F%B7%E4%B8%BA%E4%BB%80%E4%B9%88%E6%98%AFsos/" />
    <link rel="next" href="http://ansoncode.bazhentu.net/2021/103%E9%80%BB%E8%BE%91-%E4%BB%8E%E4%BA%9A%E9%87%8C%E5%A3%AB%E5%A4%9A%E5%BE%B7%E5%88%B0%E9%A6%99%E5%86%9C/" />
    <link rel="canonical" href="http://ansoncode.bazhentu.net/2021/102%E7%BB%A7%E7%94%B5%E5%99%A8%E4%B8%8D%E5%8F%AA%E6%98%AF%E6%94%BE%E5%A4%A7%E4%BF%A1%E5%8F%B7%E8%BF%99%E4%B9%88%E7%AE%80%E5%8D%95/" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <title>
        
        
            102继电器——不只放大信号这么简单！ | Anson`s Blog
        
    </title>
    <meta name="title" content="102继电器——不只放大信号这么简单！ | Anson`s Blog">
    
<link rel="stylesheet" href="/css/main.min.css">


    
    
 

<script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "http:\/\/ansoncode.bazhentu.net\/"
    },
    "articleSection" : "posts",
    "name" : "102继电器——不只放大信号这么简单！",
    "headline" : "102继电器——不只放大信号这么简单！",
    "description" : "前言 上一节我们制作了一个电报机，通过莫斯编码在渡河两岸传递军情，绕过了战场下的种种限制。战场瞬息万变，司令部认为仅仅两岸通讯距离太短，想要实",
    "inLanguage" : "zh-cn",
    "author" : "Anson",
    "creator" : "Anson",
    "publisher": "Anson",
    "accountablePerson" : "Anson",
    "copyrightHolder" : "Anson",
    "copyrightYear" : "2021",
    "datePublished": "2021-01-26 09:03:13 \u002b0800 CST",
    "dateModified" : "2021-01-26 09:03:13 \u002b0800 CST",
    "url" : "http:\/\/ansoncode.bazhentu.net\/2021\/102%E7%BB%A7%E7%94%B5%E5%99%A8%E4%B8%8D%E5%8F%AA%E6%98%AF%E6%94%BE%E5%A4%A7%E4%BF%A1%E5%8F%B7%E8%BF%99%E4%B9%88%E7%AE%80%E5%8D%95\/",
    "wordCount" : "2965",
    "keywords" : [ "逻辑","继电器", "Anson`s Blog"]
}
</script>

  </head>
    <body class="">
        <div class="wrapper">
            <nav class="navbar">
    
        <progress class="content_progress" max="0" value="0"></progress>
    
    <div class="container">
        
            <div class="navbar-header header-back2home-logo">
                <span class="logo_mark" >>$</span>
                <a href="http://ansoncode.bazhentu.net/">
                    <span class="logo_text" >cd /home/</span>
                    <span class="logo_cursor" ></span>
                </a>
            </div>
        
        <div class="navbar-right">
                
                <span class="menu">
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <span class="divide"></span>
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-dark-mode"></i></a>
                </span>
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
    
        <progress class="content_progress" max="0" value="0"></progress>
    
     <div class="container">
        <div class="navbar">
            <div class="navbar-header header-logo">
                    <a href="http://ansoncode.bazhentu.net/">Anson`s Blog</a>
            </div>
            <div class="navbar-right">
                <div><a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-dark-mode"></i></a></div>
                <div class="menu-toggle">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                <nav class="mb-md">
                    
                    
                        <a class="menu-item" href="/posts/" title="">
                            <h3>Blog</h3>
                            <div class="menu-active"></div>
                        </a>
                    
                        <a class="menu-item" href="/categories/" title="">
                            <h3>Categories</h3>
                            <div class="menu-active"></div>
                        </a>
                    
                        <a class="menu-item" href="/tags/" title="">
                            <h3>Tags</h3>
                            <div class="menu-active"></div>
                        </a>
                    
                        <a class="menu-item" href="/about/" title="">
                            <h3>About</h3>
                            <div class="menu-active"></div>
                        </a>
                    
                </nav>
        </div>
    </div>
</nav>
            <main class="main">
                <div class="container">
                    
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">102继电器——不只放大信号这么简单！</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="http://ansoncode.bazhentu.net/" rel="author">Anson</a> with ♥
                <span class="post-time">
                on <time datetime=2021-01-26 itemprop="datePublished">January 26, 2021</time>
                </span>
                in
                
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        
                        
                        
                          <a href="http://ansoncode.bazhentu.net/categories/%E4%BB%8E%E7%BB%A7%E7%94%B5%E5%99%A8%E5%88%B0%E8%AE%A1%E7%AE%97%E6%9C%BA/"> 从继电器到计算机, </a>
                        
                        
                </span>
                <span class="post-word-count">2965 words</span>
        </div>
    </header>

    <div class="post-content">
        

        
        
            
        

        
        
        
        
        

        
        
        

        <h2 id="前言">前言</h2>
<p>上一节我们制作了一个电报机，通过莫斯编码在渡河两岸传递军情，绕过了战场下的种种限制。战场瞬息万变，司令部认为仅仅两岸通讯距离太短，想要实现65公里的电报通讯。你又临危受命，接受了这个光荣而又伟大的任务。</p>
<h2 id="欧姆定律">欧姆定律</h2>
<p>用这台电报实现10公里的通讯？最直观的想法就是延长导线距离，但是现实却不能这样。</p>
<p>根据欧姆定律：</p>
<blockquote>
<p>U=I.R</p>
</blockquote>
<p>电压=电流✖电阻，增加导线长度，势必会增加增加<strong>电阻</strong>，而若要维持电流不变，就必须增大电压。在干燥而触电危险性较大的环境下，36V电压就能给人体带来伤害。</p>
<blockquote>
<p>65公里的导线，至少要148V的电压。（灯泡用白炽灯，工作电流130mA；横截面为1mm^2的铜线1公里电阻17.5Ω）</p>
</blockquote>
<h2 id="人工中转">人工中转</h2>
<p>显然，没人愿意愿意手持这样一根导线进行电报收发。那应该怎么办？作为一名工程兵，这肯定难不倒你。电压不够，人力来凑。你考虑在5公里左右设置一个<strong>中转站</strong>，人工将收到的信息转发到下一个站点。这样只需要12个中转站，就可以实现65公里通讯的目标。</p>
<p>但是，问题来了：12个站点是不是需要12个熟悉莫斯密码的通讯兵，用莫斯编码实时翻译电报闪烁？而且可不能打盹，一眨眼就可能错过重要军情。所以，你需要想出一种新的解决方案。</p>
<h2 id="电磁中转">电磁中转</h2>
<p>这时，你想起来了进修期间曾学过的电磁效应，并确信它能帮你解决这个棘手的问题。</p>
<blockquote>
<p>1831年，一位叫迈克尔·法拉第的科学家发现了磁与电之间的相互联系和转化关系。只要穿过闭合电路的磁通量发生变化，闭合电路中就会产生感应电流。这种利用磁场产生电流的现象称为电磁感应（Electromagnetic induction），产生的电流叫做感应电流。</p>
</blockquote>
<p><img src="https://ansoncode.bazhentu.net/myblogtalk/img/20210125215700.png" alt="电磁铁" loading="lazy" ></p>
<p>利用这个原理，你找了一个铁钉，在上面缠绕了一圈又一圈的铜线，给它起个名字叫做<strong>电磁铁</strong>。然后将电磁铁固定在木板上，在上面固定一个具有弹性的铁片，给它起名叫衔铁。在衔铁下方固定个开关，开关用来控制下一个电报线路。接下来，我们接上电源，见证奇迹的时刻到了。</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_23914546_59" alt="继电器结构图" loading="lazy" ></p>
<p>按下开关时，电路连通，电流通过继电器线圈，线圈变成磁体，把衔铁吸引下来，衔铁处触点接触，第二个站点开启。松开开关，电路断开，线圈磁力消失，衔铁在弹簧的拉扯下恢复初始位置，第二个站点关闭。就这样，无论当前站点发送&quot;.&ldquo;还是&rdquo;-&quot;,第二个站点总能做出同样的动作。</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_33381009_68" alt="继电器结构图" loading="lazy" ></p>
<p>利用这样原理，无论距离再远，也能把信息传递过去，中间的通讯兵也无需一直睁着眼睛观察闪烁了。利用简单的部件，实现了<strong>放大信号</strong>的功能，解决了心头大患。这个小器件就是：<strong>电磁继电器</strong>。</p>
<blockquote>
<p>电磁继电器：电磁铁（线圈+铁芯），衔铁，弹簧，触点组成。</p>
</blockquote>
<h2 id="电磁记录仪">电磁记录仪</h2>
<p>而且，你还发现：<strong>电磁继电器</strong>不仅能够中转信号，而且还能代替电报中的灯泡，成为更易用的接收端。将电磁继电器中的<strong>触点</strong>换成能够发声的<strong>音叉</strong>。当通电后，衔铁下落敲击下部触点，发出<strong>滴</strong>声；当断电后，衔铁弹起敲击上部触点，发出<strong>哒</strong>声。</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_33381009_63" alt="新型电报机" loading="lazy" ></p>
<p>为了更加方便使用，你还在衔铁上绑定一个钢笔，下面放上条带，并用电机或手摇式马达带动条带匀速移动。在衔铁起落时，伴随着滴答声，条带上会画出或长或短的符号。</p>
<p>经过这个改造，我们用滴答声代替了闪烁，并将&quot;信息&quot;记录在了纸上。优势显而易见，我们无需时刻保持专注,只待所有信号接收完毕，一总查表翻译。通过这个小小的改进，降低了通讯兵培训周期，让军事通讯网络得以更快的建成。</p>
<h2 id="电磁继电器实验">电磁继电器实验</h2>
<p>鉴于你的贡献，上级决定把你从通讯兵提拔为军事科技顾问，并让你研究更多关于军事通讯方面的产品。尽管你自觉“才疏学浅”但为了革命的胜利，仍接收了任命。接下来的日子，你对继电器这一发明，进行了更加深入的研究。</p>
<h3 id="各种形式的开关">各种形式的开关</h3>
<h4 id="联动开关">联动开关</h4>
<p>首先，你研究了帮你拿下军功章的放大电路。它可以简化为如下图所示。开关K1和K2之间在电磁继电器的作用下保持“<strong>同步</strong>”的关系。除了放大作用，似乎也没啥特别的嘛？额，不用电磁继电器也能这样……。不要气馁，继续研究。</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_33381009_179" alt="同步开关" loading="lazy" ></p>
<h4 id="并且开关和或者开关">并且开关和或者开关</h4>
<p>接下来，你又研究了下面这两种电路：<strong>并且电路</strong>和<strong>或者电路</strong>。</p>
<p>“并且电路”的特点是：当KA和KB<strong>同时</strong>闭合时，灯泡<strong>才</strong>会亮。这在逻辑上被成为“<strong>与</strong>”，也即我们常说的“并且”。</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_33381009_152" alt="并且开关简单" loading="lazy" ></p>
<p>并且关系其实不借助“继电器”，用常见的“串联”电路也能实现。</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_23914546_115" alt="并且开关继电器" loading="lazy" ></p>
<p>“或者电路”的特点是：当KA和KB<strong>有一个</strong>闭合时，灯泡<strong>就</strong>会亮。这在逻辑上被成为“<strong>与</strong>”，也即我们常说的“并且”。</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_23914546_117" alt="或者开关" loading="lazy" ></p>
<p>同理，或者关系其实不借助“继电器”，用常见的“并联”电路也能实现。</p>
<h4 id="相反开关">相反开关</h4>
<p>然后，你又构造了如下的电路。它的特点是：灯泡所在电路的开关K2默认闭合，灯泡点亮;只有K1闭合时，K2才会开路，灯泡熄灭。K1和K2之前的关系总是“<strong>相反</strong>”。这在逻辑上叫做“<strong>非</strong>”，也即我们常说的“否定”。这个关系就比较有意思了，仅通过串并联无法实现。终于取得了一些进展。</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_23914546_111" alt="相反开关电路" loading="lazy" ></p>
<p><img src="https://res.weread.qq.com/wrepub/epub_23914546_113" alt="相反开关符号" loading="lazy" ></p>
<blockquote>
<p>为了简化问题，你为每个电路起了设计了一个<em>符号</em>，详情见上文。</p>
</blockquote>
<p>基于继电器的非门电路给了你很大鼓舞。让你坚信一定可以探究出更加复杂的电路。</p>
<h4 id="放大招了异或电路">放大招了！异或电路</h4>
<p>最后，经过无数次尝试，你终于连接出下面这个“曲曲折折”电路，甚至你都不知道怎么搞出来的。</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_23914546_129" alt="异或电路详尽" loading="lazy" ></p>
<p>但是你一点都不担心：</p>
<ul>
<li>一方面，你已经有了简化他们的符号体系；</li>
<li>另一方面，你发现它可以拆分为上文提到的各种电路。</li>
</ul>
<p>好，开始简化，原来是这样：<strong>2个非电路、2个与电路和1个或电路</strong>，共8个继电器，且呈现上下对称结构。</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_23914546_127" alt="异或电路" loading="lazy" ></p>
<p>经过分析，发现它的本质是：<strong>两个非电路和与电路串联后并联在一起，又经过一个与电路</strong>。继续研究发现：仅仅当两个开关KA和KB不一样(一开一闭)时，灯泡点亮；KA和KB一样时，灯泡熄灭。</p>
<p>那能干什么用呢？你苦思冥想，暂无头绪。但隐隐感觉到它有大用途，似乎在表达“<strong>不一样</strong>”这个概念。</p>
<blockquote>
<p><strong>画外音</strong>：</p>
<ul>
<li>异或，其实就是逻辑中<strong>不等号</strong>（!=，&lt;&gt;）的表达形式（<strong>重点</strong>）</li>
<li>此外，还能搞些奇怪的应用：交换两个数，从1..n中的n-1个数中找到缺少的那个(之后有机会说)</li>
</ul>
</blockquote>
<p>见识到符号化的优势后，尽管没彻底理解异或，但还是先给它一个符号。</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_23914546_130" alt="异或电路符号表示" loading="lazy" ></p>
<h3 id="逻辑和电路的关系">逻辑和电路的关系</h3>
<p>经过上面的实验，你通过总结分析，发现了如下规律：</p>
<blockquote>
<ul>
<li>一个断开的开关和另一个断开的开关串联，整个电路还是断开的</li>
<li>一个断开的开关和另一个断开的开关并联，整个电路时断开的</li>
<li>一个闭合的开关和另一个闭合的开关串联，整个电路时连通的</li>
<li>一个闭合的开关和另一个闭合的开关并联，整个电路时连通的</li>
<li>一个闭合的开关和另一个断开的开关无论以怎么并联，电路都是连通的</li>
<li>一个闭合的开关和另一个断开的开关无论怎么串联，电路都是断开的</li>
</ul>
</blockquote>
<p>额，这么多字，也没人愿意读呀。所以，你想，若是能够用数学<strong>加减乘除</strong>那样简单的表示这个规律就好了。</p>
<p>例如这样：</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_23914546_99" alt="布尔代数和电路图" loading="lazy" ></p>
<p>查阅中外资料，你发现有一个叫做乔治·布尔的英国人，在1847年出版了《逻辑的数学分析》，创立了“逻辑运算”学。<strong>逻辑运算</strong>，不仅能够用符号表示你发现的电路规律，而且还能够进行类似数学那样的计算。更厉害的是，它可以根据你要的结果，反推组成电路。</p>
<p>举个栗子，刚刚的<strong>异或电路</strong>，运用布尔运算可以表示为：</p>
<p><img src="https://res.weread.qq.com/wrepub/epub_23914546_120" alt="异或逻辑的布尔表达式" loading="lazy" ></p>
<p>确实简洁了不少，但是咋看不懂了呢？</p>
<p>别急，下一章让我们走进逻辑的世界。从亚里士多德到莱布尼茨，从布尔到香农，领略逻辑计算的魅力，并学会像<strong>加减乘除</strong>一样简单的逻辑分析工具。</p>
<p>你满怀期待，心想：掌握了这个工具，一定能再次提升电报通讯的效率，立下新的战功。</p>
<h2 id="参考本文题图大部分来自参考文献">参考（本文题图大部分来自参考文献）</h2>
<ul>
<li><a href="https://weread.qq.com/web/reader/64e32bf071fd5a9164ece6bkc81322c012c81e728d9d180">《编码-隐匿在计算机背后的语言》</a></li>
<li><a href="https://weread.qq.com/web/reader/9a532210716ce8329a59851kc81322c012c81e728d9d180">《穿越计算机的迷雾（第二版）》</a></li>
</ul>

    </div>

    <div class="post-copyright">
            
            <p class="copyright-item">
                <span>Author:</span>
                <span>Anson </span>
                </p>
            


            
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=http://ansoncode.bazhentu.net/2021/102%E7%BB%A7%E7%94%B5%E5%99%A8%E4%B8%8D%E5%8F%AA%E6%98%AF%E6%94%BE%E5%A4%A7%E4%BF%A1%E5%8F%B7%E8%BF%99%E4%B9%88%E7%AE%80%E5%8D%95/>http://ansoncode.bazhentu.net/2021/102%E7%BB%A7%E7%94%B5%E5%99%A8%E4%B8%8D%E5%8F%AA%E6%98%AF%E6%94%BE%E5%A4%A7%E4%BF%A1%E5%8F%B7%E8%BF%99%E4%B9%88%E7%AE%80%E5%8D%95/</span>
            </p>
            
            
            <div id="qr_code_pc_outer" >
                <img src=https://api.qrserver.com/v1/create-qr-code/?size&#61;150x150&amp;data&#61;http://ansoncode.bazhentu.net/2021/102%E7%BB%A7%E7%94%B5%E5%99%A8%E4%B8%8D%E5%8F%AA%E6%98%AF%E6%94%BE%E5%A4%A7%E4%BF%A1%E5%8F%B7%E8%BF%99%E4%B9%88%E7%AE%80%E5%8D%95/>
                <p>扫一扫<br>阅读文章</p>
            </div>
            <script>
                if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
                    
                    
                    
                }else{
                    document.getElementById('qr_code_pc_outer').style.display="block"
                }
            </script>
            <style> 
            p { word-wrap:break-word; }
                #qr_code_pc_outer {
                    display: none;
                    color: #717375;
                     
                    position: fixed;
                    right: 100px;
                    text-align: center;
                    top: 200px;
                    }
                #qr_code_pc_outer img{
                    width: 100px;height: 100px;
                }
                #qr_code_pc_outer p{
                    font-size: 0.5em;
                }
            </style>
            
            
            <p class="copyright-item">
                <span>Expect:</span>
                <span>专注云开发相关技术及产品，寻找合作机会 </span>
                </p>
            
            
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>


    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s):
            
            <span class="tag"><a href="http://ansoncode.bazhentu.net/tags/%E9%80%BB%E8%BE%91/">
                    #逻辑</a></span>
            
            <span class="tag"><a href="http://ansoncode.bazhentu.net/tags/%E7%BB%A7%E7%94%B5%E5%99%A8/">
                    #继电器</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> ·
                <span><a href="http://ansoncode.bazhentu.net/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="http://ansoncode.bazhentu.net/2021/101%E7%BC%96%E7%A0%81%E5%9B%BD%E9%99%85%E6%B1%82%E6%95%91%E4%BF%A1%E5%8F%B7%E4%B8%BA%E4%BB%80%E4%B9%88%E6%98%AFsos/" class="prev" rel="prev" title="101编码——国际求救信号为什么是SOS？"><i class="iconfont icon-left"></i>&nbsp;101编码——国际求救信号为什么是SOS？</a>
        
        
        <a href="http://ansoncode.bazhentu.net/2021/103%E9%80%BB%E8%BE%91-%E4%BB%8E%E4%BA%9A%E9%87%8C%E5%A3%AB%E5%A4%9A%E5%BE%B7%E5%88%B0%E9%A6%99%E5%86%9C/" class="next" rel="next" title="103逻辑——从亚里士多德到香农（给电报做一个键盘）">103逻辑——从亚里士多德到香农（给电报做一个键盘）&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
        
            
                <div id="tcomment"></div>
<script src="https://cdn.jsdelivr.net/npm/twikoo@1.0.0/dist/twikoo.all.min.js"></script>
<script>twikoo.init({ envId: 'anson-blog-talk-8gwaudnw7b5c558b', el: '#tcomment' })</script>
            
        
    </div>
</article>
                </div>
            </main>
            <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2017 - 2022</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i>
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="http://ansoncode.bazhentu.net/">Anson</a> | </span>
         

         
            <a href="http://www.miibeian.gov.cn/" target="_blank" rel="external nofollow">陕ICP备17023607号-1 </a> |
         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/Mogeko/Mogege" target="_blank" rel="external nofollow">Mogege</a></span>
    </div>
</footer>








<script defer src="/js/vendor_main.min.js"></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha256-V8SV2MO1FUb63Bwht5Wx9x6PVHNa02gv8BgH/uH3ung=" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha256-F/Xda58SPdcUCr+xhSGz9MA2zQBPb0ASEYKohl8UCHc=" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha256-90d2pnfw0r4K8CZAWPko4rpFXQsZvJhTBGYNkipDprI=" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>




<script src="https://cdn.jsdelivr.net/gh/jmnote/plantuml-encoder@1.2.4/dist/plantuml-encoder.min.js" integrity="sha256-Qsk2KRBCN5qVZX7B+8+2IvQl1Aqc723qV1tBCQaVoqo=" crossorigin="anonymous"></script>
<script>
(function(){
  let plantumlPrefix = "language-plantuml";
  Array.prototype.forEach.call(document.querySelectorAll("[class^=" + plantumlPrefix + "]"), function(code){
    let image = document.createElement("IMG");
    image.loading = 'lazy'; 
    image.src = 'http://www.plantuml.com/plantuml/svg/~1' + plantumlEncoder.encode(code.innerText);
    code.parentNode.insertBefore(image, code);
    code.style.display = 'none';
  });
})();
</script>




<script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script> pangu.spacingPage();</script>






  <script>
    
    function loadJs(url) {
        return new Promise((resolve, reject) => {
            var script = document.createElement('script');
            script.type = "text/javascript";
            if (script.readyState) {
                script.onreadystatechange = function () {
                    if (script.readyState == "loaded" || script.readyState == "complete") {
                        script.onreadystatechange = null;
                        
                        resolve()
                    }
                }
            } else {
                script.onload = function () {
                    
                    resolve()
                }
            }
            script.src = url;
            document.body.appendChild(script);
        })

    }
    function loadManyJs(arr) {
        return new Promise(async (resolve, reject) => {
            for (let i = 0; i < arr.length; i++) {
                let jsUrl = arr[i]
                try {
                    await loadJs(jsUrl)
                } catch (error) {
                    reject(error)
                }
            }
            resolve()
        })
    }

    
    var currurl = location.href.split('#')[0]
    let userAgent = navigator.userAgent.toLowerCase();
    let isWeixin = userAgent.match(/MicroMessenger/i) == "micromessenger"
    let isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
    let arr = [
        "//astyle-src.alicdn.com/app/searchweb/products/zhaohuoshenqi/lib/jquery.js",
        "//res.wx.qq.com/open/js/jweixin-1.6.0.js"
    ]
    if (isMobile) {
        
        loadManyJs(arr).then(async () => {
            console.log('仅微信端需要执行下面的操作', currurl)
            let title = '102继电器——不只放大信号这么简单！'
            console.log('title', title)
            let desc = 'anson会写代码的产品经理，这是我的技术博客，专注产品设计及软件开发。'
            let imgUrl =  "https://ansoncode.bazhentu.net/myblogtalk/img/PfjiWupdZrtzINV.png" 
            

            let link =  "https://wechat-mp-8geeep1wd1373392-1253693669.ap-shanghai.app.tcloudbase.com/koa-starter/getSign"
            let data = await JQ.get(link, { url: currurl })
            console.log(data)
            
            
            
            
            
            
            let debug= false 
            wx.config({
                debug: debug, 
                appId: data.appId, 
                timestamp: data.timestamp, 
                nonceStr: data.nonceStr, 
                signature: data.signature,
                jsApiList: ["checkJsApi", "updateAppMessageShareData", "onMenuShareTimeline", "onMenuShareAppMessage", "onMenuShareQQ", "onMenuShareQZone"] 
            });
  
            wx.ready(function () {
                
                wx.checkJsApi({
                    jsApiList: ["checkJsApi", "updateAppMessageShareData", "onMenuShareTimeline", "onMenuShareAppMessage", "onMenuShareQQ", "onMenuShareQZone"], 
                    success: function (res) {
                        
                        
                        
                        
                    }
                });
                
                wx.updateAppMessageShareData({
                    title: title, 
                    desc: desc, 
                    link: currurl, 
                    imgUrl: imgUrl, 
                    success: function () {
                        
                    }
                })
                
                
                
                
                
                
                
                
                
                
                
                wx.onMenuShareTimeline({
                    title: title, 
                    desc: desc, 
                    link: currurl, 
                    imgUrl: imgUrl, 
                    success: function (res) {
                    },
                    cancel: function (res) {
                    },
                    fail: function (res) {
                        alert(JSON.stringify(res));
                    }
                });
                
                wx.onMenuShareAppMessage({
                    title: title, 
                    desc: desc, 
                    link: currurl, 
                    imgUrl: imgUrl, 
                    type: '', 
                    dataUrl: '', 
                    success: function () {
                        
                    },
                    cancel: function () {
                        
                    }
                });
                
                wx.onMenuShareQQ({
                    title: title, 
                    desc: desc, 
                    link: currurl, 
                    imgUrl: imgUrl, 
                    success: function () {
                        
                    },
                    cancel: function () {
                        
                    }
                });
                
                wx.onMenuShareQZone({
                    title: title, 
                    desc: desc, 
                    link: currurl, 
                    imgUrl: imgUrl, 
                    success: function () {
                        
                    },
                    cancel: function () {
                        
                    }
                });

            });
            wx.error(function (res) {
                
                console.log("初始化wx.config失败" + res)
            });
        }).catch(err => {
            console.log('load js error', err)
        })
    }


</script>


        </div>
    </body>
</html>
