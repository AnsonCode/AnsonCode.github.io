---
title: "102继电器——不只放大信号这么简单！"
date: 2021-01-25T09:03:13+08:00
tags: [ "逻辑" ]
categories:
  - "从继电器到计算机"
draft: false
math: true
plantuml: true
---

## 前言
上一节我们制作了一个电报机，通过莫斯编码在渡河两岸传递军情，绕过了战场下的种种限制。战场瞬息万变，司令部认为仅仅两岸通讯距离太短，想要实现65公里的电报通讯。你又临危受命，接受了这个光荣而又伟大的任务。

## 欧姆定律
用这台电报实现10公里的通讯？最直观的想法就是延长导线距离，但是现实却不能这样。

根据欧姆定律：
> U=I.R 

电压=电流✖电阻，增加导线长度，势必会增加增加**电阻**，而若要维持电流不变，就必须增大电压。在干燥而触电危险性较大的环境下，36V电压就能给人体带来伤害。

>65公里的导线，至少要148V的电压。（灯泡用白炽灯，工作电流130mA；横截面为1mm^2的铜线1公里电阻17.5Ω）

## 人工中转

显然，没人愿意愿意手持这样一根导线进行电报收发。那应该怎么办？作为一名工程兵，这肯定难不倒你。电压不够，人力来凑。你考虑在5公里左右设置一个**中转站**，人工将收到的信息转发到下一个站点。这样只需要12个中转站，就可以实现65公里通讯的目标。

但是，问题来了：12个站点是不是需要12个熟悉莫斯密码的通讯兵，用莫斯编码实时翻译电报闪烁？而且可不能打盹，一眨眼就可能错过重要军情。所以，你需要想出一种新的解决方案。

## 电磁中转
这时，你想起来了进修期间曾学过的电磁效应，并确信它能帮你解决这个棘手的问题。

>1831年，一位叫迈克尔·法拉第的科学家发现了磁与电之间的相互联系和转化关系。只要穿过闭合电路的磁通量发生变化，闭合电路中就会产生感应电流。这种利用磁场产生电流的现象称为电磁感应（Electromagnetic induction），产生的电流叫做感应电流。

![电磁铁](https://ansoncode.bazhentu.net/myblogtalk/img/20210125215700.png)

利用这个原理，你找了一个铁钉，在上面缠绕了一圈又一圈的铜线，给它起个名字叫做**电磁铁**。然后将电磁铁固定在木板上，在上面固定一个具有弹性的铁片，给它起名叫衔铁。在衔铁下方固定个开关，开关用来控制下一个电报线路。接下来，我们接上电源，见证奇迹的时刻到了。

![继电器结构图](https://res.weread.qq.com/wrepub/epub_23914546_59)

按下开关时，电路连通，电流通过继电器线圈，线圈变成磁体，把衔铁吸引下来，衔铁处触点接触，第二个站点开启。松开开关，电路断开，线圈磁力消失，衔铁在弹簧的拉扯下恢复初始位置，第二个站点关闭。就这样，无论当前站点发送"."还是"-",第二个站点总能做出同样的动作。

![继电器结构图](https://res.weread.qq.com/wrepub/epub_33381009_68)

利用这样原理，无论距离再远，也能把信息传递过去，中间的通讯兵也无需一直睁着眼睛观察闪烁了。利用简单的部件，实现了**放大信号**的功能，解决了心头大患。这个小器件就是：**电磁继电器**。

> 电磁继电器：电磁铁（线圈+铁芯），衔铁，弹簧，触点组成。

## 电磁记录仪

而且，你还发现：**电磁继电器**不仅能够中转信号，而且还能代替电报中的灯泡，成为更易用的接收端。将电磁继电器中的**触点**换成能够发声的**音叉**。当通电后，衔铁下落敲击下部触点，发出**滴**声；当断电后，衔铁弹起敲击上部触点，发出**哒**声。

![新型电报机](https://res.weread.qq.com/wrepub/epub_33381009_63)

为了更加方便使用，你还在衔铁上绑定一个钢笔，下面放上条带，并用电机或手摇式马达带动条带匀速移动。在衔铁起落时，伴随着滴答声，条带上会画出或长或短的符号。

经过这个改造，我们用滴答声代替了闪烁，并将"信息"记录在了纸上。优势显而易见，我们无需时刻保持专注,只待所有信号接收完毕，一总查表翻译。通过这个小小的改进，降低了通讯兵培训周期，让军事通讯网络得以更快的建成。

## 电磁继电器实验
鉴于你的贡献，上级决定把你从通讯兵提拔为军事科技顾问，并让你研究更多关于军事通讯方面的产品。尽管你自觉“才疏学浅”但为了革命的胜利，仍接收了任命。接下来的日子，你对继电器这一发明，进行了更加深入的研究。

### 各种形式的开关

#### 联动开关
首先，你研究了帮你拿下军功章的放大电路。它可以简化为如下图所示。开关K1和K2之间在电磁继电器的作用下保持“**同步**”的关系。除了放大作用，似乎也没啥特别的嘛？额，不用电磁继电器也能这样……。不要气馁，继续研究。

![同步开关](https://res.weread.qq.com/wrepub/epub_33381009_179)

####  并且开关和或者开关
接下来，你又研究了下面这两种电路：**并且电路**和**或者电路**。

“并且电路”的特点是：当KA和KB**同时**闭合时，灯泡**才**会亮。这在逻辑上被成为“**与**”，也即我们常说的“并且”。

![并且开关简单](https://res.weread.qq.com/wrepub/epub_33381009_152)

并且关系其实不借助“继电器”，用常见的“串联”电路也能实现。

![并且开关继电器](https://res.weread.qq.com/wrepub/epub_23914546_115)

“或者电路”的特点是：当KA和KB**有一个**闭合时，灯泡**就**会亮。这在逻辑上被成为“**与**”，也即我们常说的“并且”。

![或者开关](https://res.weread.qq.com/wrepub/epub_23914546_117)

同理，或者关系其实不借助“继电器”，用常见的“并联”电路也能实现。

#### 相反开关
然后，你又构造了如下的电路。它的特点是：灯泡所在电路的开关K2默认闭合，灯泡点亮;只有K1闭合时，K2才会开路，灯泡熄灭。K1和K2之前的关系总是“**相反**”。这在逻辑上叫做“**非**”，也即我们常说的“否定”。这个关系就比较有意思了，仅通过串并联无法实现。终于取得了一些进展。

![相反开关电路](https://res.weread.qq.com/wrepub/epub_23914546_111)

![相反开关符号](https://res.weread.qq.com/wrepub/epub_23914546_113)

> 为了简化问题，你为每个电路起了设计了一个*符号*，详情见上文。

基于继电器的非门电路给了你很大鼓舞。让你坚信一定可以探究出更加复杂的电路。

####  放大招了！异或电路
最后，经过无数次尝试，你终于连接出下面这个“曲曲折折”电路，甚至你都不知道怎么搞出来的。

![异或电路详尽](https://res.weread.qq.com/wrepub/epub_23914546_129)

但是你一点都不担心：
- 一方面，你已经有了简化他们的符号体系；
- 另一方面，你发现它可以拆分为上文提到的各种电路。

好，开始简化，原来是这样：**2个非电路、2个与电路和1个或电路**，共8个继电器，且呈现上下对称结构。

![异或电路](https://res.weread.qq.com/wrepub/epub_23914546_127)

经过分析，发现它的本质是：**两个非电路和与电路串联后并联在一起，又经过一个与电路**。继续研究发现：仅仅当两个开关KA和KB不一样(一开一闭)时，灯泡点亮；KA和KB一样时，灯泡熄灭。

那能干什么用呢？你苦思冥想，暂无头绪。但隐隐感觉到它有大用途，似乎在表达“**不一样**”这个概念。

>**画外音**：
> - 异或，其实就是逻辑中**不等号**（!=，<>）的表达形式（**重点**）
> - 此外，还能搞些奇怪的应用：交换两个数，从1..n中的n-1个数中找到缺少的那个(之后有机会说)

见识到符号化的优势后，尽管没彻底理解异或，但还是先给它一个符号。

![异或电路符号表示](https://res.weread.qq.com/wrepub/epub_23914546_130)

### 逻辑和电路的关系
经过上面的实验，你通过总结分析，发现了如下规律：

>- 一个断开的开关和另一个断开的开关串联，整个电路还是断开的
>- 一个断开的开关和另一个断开的开关并联，整个电路时断开的
>- 一个闭合的开关和另一个闭合的开关串联，整个电路时连通的
>- 一个闭合的开关和另一个闭合的开关并联，整个电路时连通的
>- 一个闭合的开关和另一个断开的开关无论以怎么并联，电路都是连通的
>- 一个闭合的开关和另一个断开的开关无论怎么串联，电路都是断开的

额，这么多字，也没人愿意读呀。所以，你想，若是能够用数学**加减乘除**那样简单的表示这个规律就好了。

例如这样：

![布尔代数和电路图](https://res.weread.qq.com/wrepub/epub_23914546_99)

查阅中外资料，你发现有一个叫做乔治·布尔的英国人，在1847年出版了《逻辑的数学分析》，创立了“逻辑运算”学。**逻辑运算**，不仅能够用符号表示你发现的电路规律，而且还能够进行类似数学那样的计算。更厉害的是，它可以根据你要的结果，反推组成电路。

举个栗子，刚刚的**异或电路**，运用布尔运算可以表示为：

![异或逻辑的布尔表达式](https://res.weread.qq.com/wrepub/epub_23914546_120)

确实简洁了不少，但是咋看不懂了呢？

别急，下一章让我们走进逻辑的世界。从亚里士多德到莱布尼茨，从布尔到香农，领略逻辑计算的魅力，并学会像**加减乘除**一样简单的逻辑分析工具。

你满怀期待，心想：掌握了这个工具，一定能再次提升电报通讯的效率，立下新的战功。

## 参考（本文题图大部分来自参考文献）
- [《编码-隐匿在计算机背后的语言》](https://weread.qq.com/web/reader/64e32bf071fd5a9164ece6bkc81322c012c81e728d9d180)
- [《穿越计算机的迷雾（第二版）》](https://weread.qq.com/web/reader/9a532210716ce8329a59851kc81322c012c81e728d9d180)