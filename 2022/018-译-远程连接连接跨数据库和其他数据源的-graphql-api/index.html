<!DOCTYPE html>
<html lang="zh-cn">
    <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noodp"/>
    <meta name="author" content="Anson">
    <meta name="description" content="anson会写代码的产品经理，这是我的技术博客，专注产品设计及软件开发。">
    <meta name="keywords" content="golang;PMP">
    
    <link rel="prev" href="http://ansoncode.bazhentu.net/2022/017-%E8%AF%91-copy-2/" />
    
    <link rel="canonical" href="http://ansoncode.bazhentu.net/2022/018-%E8%AF%91-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%BF%9E%E6%8E%A5%E8%B7%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84-graphql-api/" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <title>
        
        
            018 译 | 远程连接：连接跨数据库和其他数据源的 GraphQL API | Anson`s Blog
        
    </title>
    <meta name="title" content="018 译 | 远程连接：连接跨数据库和其他数据源的 GraphQL API | Anson`s Blog">
    
<link rel="stylesheet" href="/css/main.min.css">


    
    
 

<script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "http:\/\/ansoncode.bazhentu.net\/"
    },
    "articleSection" : "posts",
    "name" : "018 译 | 远程连接：连接跨数据库和其他数据源的 GraphQL API",
    "headline" : "018 译 | 远程连接：连接跨数据库和其他数据源的 GraphQL API",
    "description" : "翻译自：Remote Joins: A GraphQL API to join across your database and other data-sources 今天我们很高兴宣布 Remote Joins 的发布。使用 Hasura Remote Joins 的数据联合现在在 V1.3.0 稳定版本可用。 使用 Remote Joins ，开发者可以将跨",
    "inLanguage" : "zh-cn",
    "author" : "Anson",
    "creator" : "Anson",
    "publisher": "Anson",
    "accountablePerson" : "Anson",
    "copyrightHolder" : "Anson",
    "copyrightYear" : "2022",
    "datePublished": "2022-03-16 21:48:45 \u002b0800 CST",
    "dateModified" : "2022-03-16 21:48:45 \u002b0800 CST",
    "url" : "http:\/\/ansoncode.bazhentu.net\/2022\/018-%E8%AF%91-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%BF%9E%E6%8E%A5%E8%B7%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84-graphql-api\/",
    "wordCount" : "1203",
    "keywords" : [ "技术翻译","Hasura", "Anson`s Blog"]
}
</script>

  </head>
    <body class="">
        <div class="wrapper">
            <nav class="navbar">
    
        <progress class="content_progress" max="0" value="0"></progress>
    
    <div class="container">
        
            <div class="navbar-header header-back2home-logo">
                <span class="logo_mark" >>$</span>
                <a href="http://ansoncode.bazhentu.net/">
                    <span class="logo_text" >cd /home/</span>
                    <span class="logo_cursor" ></span>
                </a>
            </div>
        
        <div class="navbar-right">
                
                <span class="menu">
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <span class="divide"></span>
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-dark-mode"></i></a>
                </span>
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
    
        <progress class="content_progress" max="0" value="0"></progress>
    
     <div class="container">
        <div class="navbar">
            <div class="navbar-header header-logo">
                    <a href="http://ansoncode.bazhentu.net/">Anson`s Blog</a>
            </div>
            <div class="navbar-right">
                <div><a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-dark-mode"></i></a></div>
                <div class="menu-toggle">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                <nav class="mb-md">
                    
                    
                        <a class="menu-item" href="/posts/" title="">
                            <h3>Blog</h3>
                            <div class="menu-active"></div>
                        </a>
                    
                        <a class="menu-item" href="/categories/" title="">
                            <h3>Categories</h3>
                            <div class="menu-active"></div>
                        </a>
                    
                        <a class="menu-item" href="/tags/" title="">
                            <h3>Tags</h3>
                            <div class="menu-active"></div>
                        </a>
                    
                        <a class="menu-item" href="/about/" title="">
                            <h3>About</h3>
                            <div class="menu-active"></div>
                        </a>
                    
                </nav>
        </div>
    </div>
</nav>
            <main class="main">
                <div class="container">
                    
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">018 译 | 远程连接：连接跨数据库和其他数据源的 GraphQL API</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="http://ansoncode.bazhentu.net/" rel="author">Anson</a> with ♥
                <span class="post-time">
                on <time datetime=2022-03-16 itemprop="datePublished">March 16, 2022</time>
                </span>
                in
                
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        
                        
                        
                          <a href="http://ansoncode.bazhentu.net/categories/%E7%A0%94%E5%8F%91%E6%8F%90%E6%95%88/"> 研发提效, </a>
                        
                        
                </span>
                <span class="post-word-count">1203 words</span>
        </div>
    </header>

    <div class="post-content">
        

        
        
            
        

        
        
        
        
        

        
        
        

        <p>翻译自：<a href="https://hasura.io/blog/remote-joins-a-graphql-api-to-join-database-and-other-data-sources/">Remote Joins: A GraphQL API to join across your database and other data-sources</a></p>
<p>今天我们很高兴宣布 Remote Joins 的发布。使用 Hasura Remote Joins 的数据联合现在在 V1.3.0 稳定版本可用。</p>
<p><strong>使用 Remote Joins ，开发者可以将跨不同数据源的数据视为同一个数据库而不必修改或者影响现存数据源。</strong></p>
<p>随着开发者和团队开始使用越来越多的第三方 APIs，多数据库和微服务，数据和“真相之源”正在这些数据源间传播。应用开发者很难访问精确的数据切片，并且花费大量研发周期将数据安全的整合到一起。</p>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220315221708.png" alt="Remote Joins: A GraphQL API to join across your database and other data-sources" loading="lazy" ></p>
<p>Hasura 的 Remote Joins 扩展跨表连接数据的概念，能够跨表和远程数据源连接数据。一旦创建了数据库类型和 APIs 类型之间的关系，然后你可以通过执行 GraphQL 查询“连接”他们。</p>
<p>Remote joins 可以跨数据库和 APIs 连接。这些 APIs 可以是你写的<a href="https://hasura.io/graphql/production-ready-existing-apis/">自定义 GraphQL 服务</a>，第三方 SaaS APIs，或者甚至其他 Hasura 实例。</p>
<p>当然，由于 Hasura 旨在成为一个你可以直接暴露到应用上的 GraphQL 服务，当提供远程连接时，Hasura 也处理安全和身份验证。</p>
<h2 id="用例1客户数据与在-stripe-中的账户账单支付信息连接">用例#1：客户数据与在 Stripe 中的账户、账单、支付信息连接</h2>
<p>如果在你的应用上有使用 Stripe 的支付方法，你客户的很多账户、账单信息存储在 Stripe 中。例如，客户的储值卡、账户余额、账单/发票历史。</p>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220315224653.png" alt="Customer data joined with account, billing, payment-transaction data in Stripe" loading="lazy" ></p>
<p>在应用中，你不出所料的想要为用户展示卡片和发票历史。你将写代码从 Stripe API 为正确的用户、发票获取正确的数据，并将其作为 API 响应返回给应用。</p>
<p>这是 Hasura 上的设置：</p>
<h3 id="步骤-1设置-onegraph-连接到你的-stripe-账户">步骤 1：设置 OneGraph 连接到你的 Stripe 账户</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220315225202.png" alt="Setup OneGraph to connect to your Stripe account" loading="lazy" ></p>
<h3 id="步骤-2将-onegraph-作为远程模式添加到-hasura">步骤 2：将 OneGraph 作为远程模式添加到 Hasura</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220315225335.png" alt="Add OneGraph as a remote schema to Hasura" loading="lazy" ></p>
<h3 id="步骤-3使用-stripe_customer_id-作为连接键设置客户表到-stripe-解析器的远程关系">步骤 3：使用 <code>stripe_customer_id</code> 作为“连接”键设置客户表到 Stripe 解析器的远程关系</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220315225602.png" alt="Your table should have the stripe_customer_id column" loading="lazy" ></p>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220315225634.png" alt="Setup a remote relationship from your customer table to the Stripe resolver using the stripe_customer_id as the &ldquo;join&rdquo; key" loading="lazy" ></p>
<h3 id="步骤-4发起-graphql-查询在一个请求中获取客户和-stripe-信息">步骤 4：发起 GraphQL 查询在一个请求中获取客户和 stripe 信息！</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220315225833.png" alt="Make GraphQL queries to fetch customer and stripe information in one shot!" loading="lazy" ></p>
<h2 id="用例2用户数据连接-auth0-的个人资料信息">用例#2：用户数据连接 Auth0 的个人资料信息</h2>
<p>当你使用外部身份验证提供商（或者甚至一个你团队不直接拥有的身份验证/用户管理微服务），将有一些信息仅由身份认证服务提供。例如， <code>last_login</code>, <code>verified_email</code>, <code>login_count</code> 等。</p>
<p>在数据库中，你通常有一个具有 <code>auth0_id</code> 字段的用户表。为获取特定身份信息，你需要使用这个 ID 和 Auth0 API。</p>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316202126.png" alt="User data joined with account/profile/auth information in Auth0" loading="lazy" ></p>
<p>下面是 Hasura 如何帮助你自动化这个流程：</p>
<h3 id="步骤-1在-graphql-查询httpshasuraiolearngraphqlintro-graphqlgraphql-queries解析器中写一个封装有-auth0-个人资料-api-的无服务函数">步骤 1：在 <a href="https://hasura.io/learn/graphql/intro-graphql/graphql-queries/">GraphQL 查询</a>解析器中写一个封装有 Auth0 个人资料 API 的无服务函数</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316202440.png" alt="Write a serverless function that wraps the Auth0 profile API in a GraphQL query resolver. " loading="lazy" ></p>
<h3 id="步骤-2在-hasura-中将此连接为一个-remote-schema">步骤 2：在 Hasura 中将此连接为一个 remote schema</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316202634.png" alt="Connect this as a remote schema in Hasura" loading="lazy" ></p>
<h3 id="步骤-3前往-hasura-中的-user-表并为上面添加的模式中增加一个远程关系">步骤 3：前往 Hasura 中的 <code>USER</code> 表，并为上面添加的模式中增加一个“远程关系”</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316202913.png" alt="The auth0_id identifier is the &ldquo;join&rdquo; key from your database" loading="lazy" ></p>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316203010.png" alt="Add a &ldquo;remote relationship&rdquo; to the auth0 schema" loading="lazy" ></p>
<h3 id="步骤-4发起一个-graphql-查询同时从user-表和-auth0-个人资料信息查询数据">步骤 4：发起一个 GraphQL 查询同时从<code>USER</code> 表和 Auth0 个人资料信息查询数据</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316204258.png" alt="Make a GraphQL query to query data from the user table and the Auth0 profile information simultaneously" loading="lazy" ></p>
<h2 id="用例3跨-2-个独立的数据库连接数据">用例#3：跨 2 个独立的数据库连接数据</h2>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316204411.png" alt="Joining data across 2 databases" loading="lazy" ></p>
<p>标题说明了一切。这是 Hasura 的工作原理！</p>
<h3 id="步骤-1设置-hasura-使用正确的权限控制规则指向数据库-1-和数据库-2以便-graphql-api-是安全的">步骤 1：设置 Hasura 使用正确的权限控制规则指向数据库 1 和数据库 2，以便 GraphQL API 是安全的</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316204706.png" alt="The &ldquo;remote&rdquo; Hasura + Postgres" loading="lazy" ></p>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316204725.png" alt="The &ldquo;primary&rdquo; Hasura + Postgres" loading="lazy" ></p>
<h3 id="步骤-2在你主数据库的-hasura-上增加第二个-hasura-作为一个远程模式">步骤 2：在你“主”数据库的 Hasura 上，增加第二个 Hasura 作为一个远程模式</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316204924.png" alt="On the Hasura of your &ldquo;primary&rdquo; database, add the second Hasura as a remote schema" loading="lazy" ></p>
<h3 id="步骤-3建立从主数据库任意表到其他数据库解析器-的远程关系">步骤 3：建立从“主”数据库任意表到其他数据库解析器 的远程关系</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316205300.png" alt="Set up remote relationships from any table in your &ldquo;primary&rdquo; database to resolvers in the other database" loading="lazy" ></p>
<h3 id="步骤-4运行跨-2-个数据库连接的-graphql-查询">步骤 4：运行跨 2 个数据库连接的 GraphQL 查询</h3>
<p><img src="https://gitee.com/caoyanbin/picgo/raw/master/img/20220316205447.png" alt="A GraphQL query that joins data across 2 databases!" loading="lazy" ></p>
<p>注意：Hasura Remote Joins 是一个联邦类型，类似 Apollo Federation。主要的不同是 Apollo Federation 目的是帮助拥有多个 GraphQL 团队的组织“联合”一个全局的 GraphQL schema。 Hasura remote joins 帮你跨多个数据源（或 GraphQL &amp; REST microservices）“连接”，以便你获得一个统一的数据联合 GraphQL API。该统一 GraphQL API 或许对为其应用提供多个数据源的团队所必须，也可能是是一个统一的跨多团队的 GraphQL API，由组织的中心团队维护。</p>

    </div>

    <div class="post-copyright">
            
            <p class="copyright-item">
                <span>Author:</span>
                <span>Anson </span>
                </p>
            


            
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=http://ansoncode.bazhentu.net/2022/018-%E8%AF%91-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%BF%9E%E6%8E%A5%E8%B7%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84-graphql-api/>http://ansoncode.bazhentu.net/2022/018-%E8%AF%91-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%BF%9E%E6%8E%A5%E8%B7%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84-graphql-api/</span>
            </p>
            
            
            <div id="qr_code_pc_outer" >
                <img src=https://api.qrserver.com/v1/create-qr-code/?size&#61;150x150&amp;data&#61;http://ansoncode.bazhentu.net/2022/018-%E8%AF%91-%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E8%BF%9E%E6%8E%A5%E8%B7%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84-graphql-api/>
                <p>扫一扫<br>阅读文章</p>
            </div>
            <script>
                if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
                    
                    
                    
                }else{
                    document.getElementById('qr_code_pc_outer').style.display="block"
                }
            </script>
            <style> 
            p { word-wrap:break-word; }
                #qr_code_pc_outer {
                    display: none;
                    color: #717375;
                     
                    position: fixed;
                    right: 100px;
                    text-align: center;
                    top: 200px;
                    }
                #qr_code_pc_outer img{
                    width: 100px;height: 100px;
                }
                #qr_code_pc_outer p{
                    font-size: 0.5em;
                }
            </style>
            
            
            <p class="copyright-item">
                <span>Expect:</span>
                <span>专注云开发相关技术及产品，寻找合作机会 </span>
                </p>
            
            
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>


    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s):
            
            <span class="tag"><a href="http://ansoncode.bazhentu.net/tags/%E6%8A%80%E6%9C%AF%E7%BF%BB%E8%AF%91/">
                    #技术翻译</a></span>
            
            <span class="tag"><a href="http://ansoncode.bazhentu.net/tags/hasura/">
                    #Hasura</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> ·
                <span><a href="http://ansoncode.bazhentu.net/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="http://ansoncode.bazhentu.net/2022/017-%E8%AF%91-copy-2/" class="prev" rel="prev" title="017 译 | 使用Hasura增加自定义业务逻辑"><i class="iconfont icon-left"></i>&nbsp;017 译 | 使用Hasura增加自定义业务逻辑</a>
        
        
    </div>

    <div class="post-comment">
        
            
                <div id="tcomment"></div>
<script src="https://cdn.jsdelivr.net/npm/twikoo@1.0.0/dist/twikoo.all.min.js"></script>
<script>twikoo.init({ envId: 'anson-blog-talk-8gwaudnw7b5c558b', el: '#tcomment' })</script>
            
        
    </div>
</article>
                </div>
            </main>
            <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2017 - 2022</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i>
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="http://ansoncode.bazhentu.net/">Anson</a> | </span>
         

         
            <a href="http://www.miibeian.gov.cn/" target="_blank" rel="external nofollow">陕ICP备17023607号-1 </a> |
         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/Mogeko/Mogege" target="_blank" rel="external nofollow">Mogege</a></span>
    </div>
</footer>








<script defer src="/js/vendor_main.min.js"></script>







<script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script> pangu.spacingPage();</script>






  <script>
    
    function loadJs(url) {
        return new Promise((resolve, reject) => {
            var script = document.createElement('script');
            script.type = "text/javascript";
            if (script.readyState) {
                script.onreadystatechange = function () {
                    if (script.readyState == "loaded" || script.readyState == "complete") {
                        script.onreadystatechange = null;
                        
                        resolve()
                    }
                }
            } else {
                script.onload = function () {
                    
                    resolve()
                }
            }
            script.src = url;
            document.body.appendChild(script);
        })

    }
    function loadManyJs(arr) {
        return new Promise(async (resolve, reject) => {
            for (let i = 0; i < arr.length; i++) {
                let jsUrl = arr[i]
                try {
                    await loadJs(jsUrl)
                } catch (error) {
                    reject(error)
                }
            }
            resolve()
        })
    }

    
    var currurl = location.href.split('#')[0]
    let userAgent = navigator.userAgent.toLowerCase();
    let isWeixin = userAgent.match(/MicroMessenger/i) == "micromessenger"
    let isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
    let arr = [
        "//astyle-src.alicdn.com/app/searchweb/products/zhaohuoshenqi/lib/jquery.js",
        "//res.wx.qq.com/open/js/jweixin-1.6.0.js"
    ]
    if (isMobile) {
        
        loadManyJs(arr).then(async () => {
            console.log('仅微信端需要执行下面的操作', currurl)
            let title = '018 译 | 远程连接：连接跨数据库和其他数据源的 GraphQL API'
            console.log('title', title)
            let desc = 'anson会写代码的产品经理，这是我的技术博客，专注产品设计及软件开发。'
            let imgUrl =  "https://ansoncode.bazhentu.net/myblogtalk/img/PfjiWupdZrtzINV.png" 
            

            let link =  "https://wechat-mp-8geeep1wd1373392-1253693669.ap-shanghai.app.tcloudbase.com/koa-starter/getSign"
            let data = await JQ.get(link, { url: currurl })
            console.log(data)
            
            
            
            
            
            
            let debug= false 
            wx.config({
                debug: debug, 
                appId: data.appId, 
                timestamp: data.timestamp, 
                nonceStr: data.nonceStr, 
                signature: data.signature,
                jsApiList: ["checkJsApi", "updateAppMessageShareData", "onMenuShareTimeline", "onMenuShareAppMessage", "onMenuShareQQ", "onMenuShareQZone"] 
            });
  
            wx.ready(function () {
                
                wx.checkJsApi({
                    jsApiList: ["checkJsApi", "updateAppMessageShareData", "onMenuShareTimeline", "onMenuShareAppMessage", "onMenuShareQQ", "onMenuShareQZone"], 
                    success: function (res) {
                        
                        
                        
                        
                    }
                });
                
                wx.updateAppMessageShareData({
                    title: title, 
                    desc: desc, 
                    link: currurl, 
                    imgUrl: imgUrl, 
                    success: function () {
                        
                    }
                })
                
                
                
                
                
                
                
                
                
                
                
                wx.onMenuShareTimeline({
                    title: title, 
                    desc: desc, 
                    link: currurl, 
                    imgUrl: imgUrl, 
                    success: function (res) {
                    },
                    cancel: function (res) {
                    },
                    fail: function (res) {
                        alert(JSON.stringify(res));
                    }
                });
                
                wx.onMenuShareAppMessage({
                    title: title, 
                    desc: desc, 
                    link: currurl, 
                    imgUrl: imgUrl, 
                    type: '', 
                    dataUrl: '', 
                    success: function () {
                        
                    },
                    cancel: function () {
                        
                    }
                });
                
                wx.onMenuShareQQ({
                    title: title, 
                    desc: desc, 
                    link: currurl, 
                    imgUrl: imgUrl, 
                    success: function () {
                        
                    },
                    cancel: function () {
                        
                    }
                });
                
                wx.onMenuShareQZone({
                    title: title, 
                    desc: desc, 
                    link: currurl, 
                    imgUrl: imgUrl, 
                    success: function () {
                        
                    },
                    cancel: function () {
                        
                    }
                });

            });
            wx.error(function (res) {
                
                console.log("初始化wx.config失败" + res)
            });
        }).catch(err => {
            console.log('load js error', err)
        })
    }


</script>


        </div>
    </body>
</html>
